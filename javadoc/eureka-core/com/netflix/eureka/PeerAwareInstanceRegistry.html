<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_31) on Wed Aug 29 19:34:37 PDT 2012 -->
<TITLE>
PeerAwareInstanceRegistry (eureka-core 1.1.1-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2012-08-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PeerAwareInstanceRegistry (eureka-core 1.1.1-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/netflix/eureka/StatusFilter.html" title="class in com.netflix.eureka"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/netflix/eureka/PeerAwareInstanceRegistry.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PeerAwareInstanceRegistry.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_com.netflix.eureka.InstanceRegistry">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.netflix.eureka</FONT>
<BR>
Class PeerAwareInstanceRegistry</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">com.netflix.eureka.InstanceRegistry</A>
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.netflix.eureka.PeerAwareInstanceRegistry</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>com.netflix.discovery.shared.LookupService&lt;java.lang.String&gt;, <A HREF="../../../com/netflix/eureka/lease/LeaseManager.html" title="interface in com.netflix.eureka.lease">LeaseManager</A>&lt;com.netflix.appinfo.InstanceInfo&gt;</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>PeerAwareInstanceRegistry</B><DT>extends <A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></DL>
</PRE>

<P>
Handles replication of all operations to <A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka"><CODE>InstanceRegistry</CODE></A> to peer
 <em>Eureka</em> nodes to keep them all in sync.
 
 <p>
 Primary operations that are replicated are the
 <em>Registers,Renewals,Cancels,Expirations and Status Changes</em>
 </p>
 
 <p>
 When the eureka server starts up it tries to fetch all the registry
 information from the peer eureka nodes.If for some reason this operation
 fails, the server does not allow the user to get the registry information for
 a period specified in
 <A HREF="../../../com/netflix/eureka/EurekaServerConfig.html#getWaitTimeInMsWhenSyncEmpty()"><CODE>EurekaServerConfig.getWaitTimeInMsWhenSyncEmpty()</CODE></A>.
 </p>
 
 <p>
 One important thing to note about <em>renewals</em>.If the renewal drops more
 than the specified threshold as specified in
 <A HREF="../../../com/netflix/eureka/EurekaServerConfig.html#getRenewalPercentThreshold()"><CODE>EurekaServerConfig.getRenewalPercentThreshold()</CODE></A> within a period of
 <A HREF="../../../com/netflix/eureka/EurekaServerConfig.html#getRenewalThresholdUpdateIntervalMs()"><CODE>EurekaServerConfig.getRenewalThresholdUpdateIntervalMs()</CODE></A>, eureka
 perceives this as a danger and stops expiring instances.
 </p>
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_com.netflix.eureka.InstanceRegistry"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class com.netflix.eureka.<A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#overriddenInstanceStatusMap">overriddenInstanceStatusMap</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#cancel(java.lang.String, java.lang.String, boolean)">cancel</A></B>(java.lang.String&nbsp;appName,
       java.lang.String&nbsp;id,
       boolean&nbsp;isReplication)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cancels the registration of an instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html" title="class in com.netflix.eureka">PeerAwareInstanceRegistry</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getInstance()">getInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;com.netflix.appinfo.InstanceInfo</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getNextServerFromEureka(java.lang.String, boolean)">getNextServerFromEureka</A></B>(java.lang.String&nbsp;virtualHostname,
                        boolean&nbsp;secure)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getNumOfActiveThreadsInReplicationPipeline()">getNumOfActiveThreadsInReplicationPipeline</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the number of active threads used for replicating to peer eureka
 nodes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getNumOfItemsInReplicationPipeline()">getNumOfItemsInReplicationPipeline</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the number of items in the queue pending replication to other
 peers.This gives an indication of replication latency to peer replica
 nodes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getNumOfRenewsPerMinThreshold()">getNumOfRenewsPerMinThreshold</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the threshold for the renewals per minute.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getNumOfReplicationsInLastMin()">getNumOfReplicationsInLastMin</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the number of <em>renewals</em> in the last minute.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../com/netflix/eureka/cluster/PeerEurekaNode.html" title="class in com.netflix.eureka.cluster">PeerEurekaNode</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getReplicaNodes()">getReplicaNodes</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the list of peer eureka nodes which is the list to replicate
 information to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;com.netflix.discovery.shared.Application&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getSortedApplications()">getSortedApplications</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the list of all <CODE>Applications</CODE> from the registry in sorted
 lexical order of <CODE>Application.getName()</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#isBelowRenewThresold()">isBelowRenewThresold</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if the number of renewals is lesser than threshold.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#isLeaseExpirationEnabled()">isLeaseExpirationEnabled</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#isSelfPreservationModeEnabled()">isSelfPreservationModeEnabled</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks to see if the self-preservation mode is enabled.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#register(com.netflix.appinfo.InstanceInfo, boolean)">register</A></B>(com.netflix.appinfo.InstanceInfo&nbsp;info,
         boolean&nbsp;isReplication)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registers the information about the <CODE>InstanceInfo</CODE> and replicates
 this information to all peer eureka nodes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#renew(java.lang.String, java.lang.String, boolean)">renew</A></B>(java.lang.String&nbsp;appName,
      java.lang.String&nbsp;id,
      boolean&nbsp;isReplication)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Renew the <A HREF="../../../com/netflix/eureka/lease/Lease.html" title="class in com.netflix.eureka.lease"><CODE>Lease</CODE></A> associated w/ the passed in <code>appName</code>
 and <code>id</code></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#setNumOfRenewsPerMinThreshold(int)">setNumOfRenewsPerMinThreshold</A></B>(int&nbsp;newThreshold)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the renewal threshold to the given threshold.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#shouldAllowAccess()">shouldAllowAccess</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks to see if the registry access is allowed or the server is in a
 situation where it does not all getting registry information.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#statusUpdate(java.lang.String, com.netflix.eureka.resources.ASGResource.ASGStatus, boolean)">statusUpdate</A></B>(java.lang.String&nbsp;asgName,
             <A HREF="../../../com/netflix/eureka/resources/ASGResource.ASGStatus.html" title="enum in com.netflix.eureka.resources">ASGResource.ASGStatus</A>&nbsp;newStatus,
             boolean&nbsp;isReplication)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Replicate the <em>ASG status</em> updates to peer eureka nodes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#statusUpdate(java.lang.String, java.lang.String, com.netflix.appinfo.InstanceInfo.InstanceStatus, boolean)">statusUpdate</A></B>(java.lang.String&nbsp;appName,
             java.lang.String&nbsp;id,
             com.netflix.appinfo.InstanceInfo.InstanceStatus&nbsp;newStatus,
             boolean&nbsp;isReplication)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates the status of an instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#syncUp()">syncUp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Populates the registry information from a peer eureka node.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_com.netflix.eureka.InstanceRegistry"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class com.netflix.eureka.<A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#evict()">evict</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getApplication(java.lang.String)">getApplication</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getApplicationDeltas()">getApplicationDeltas</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getApplications()">getApplications</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getInstanceByAppAndId(java.lang.String, java.lang.String)">getInstanceByAppAndId</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getInstancesById(java.lang.String)">getInstancesById</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getLastNCanceledInstances()">getLastNCanceledInstances</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getLastNRegisteredInstances()">getLastNRegisteredInstances</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getNumberofElementsininstanceCache()">getNumberofElementsininstanceCache</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getNumOfRenewsInLastMin()">getNumOfRenewsInLastMin</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#postInit()">postInit</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#register(com.netflix.appinfo.InstanceInfo, int, boolean)">register</A>, <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#storeOverriddenStatusIfRequired(java.lang.String, com.netflix.appinfo.InstanceInfo.InstanceStatus)">storeOverriddenStatusIfRequired</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getInstance()"><!-- --></A><H3>
getInstance</H3>
<PRE>
public static <A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html" title="class in com.netflix.eureka">PeerAwareInstanceRegistry</A> <B>getInstance</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="syncUp()"><!-- --></A><H3>
syncUp</H3>
<PRE>
public void <B>syncUp</B>()</PRE>
<DL>
<DD>Populates the registry information from a peer eureka node. This
 operation fails over to other nodes until the list is exhausted if the
 communication fails.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="shouldAllowAccess()"><!-- --></A><H3>
shouldAllowAccess</H3>
<PRE>
public boolean <B>shouldAllowAccess</B>()</PRE>
<DL>
<DD>Checks to see if the registry access is allowed or the server is in a
 situation where it does not all getting registry information. The server
 does not return registry information for a period specified in
 <A HREF="../../../com/netflix/eureka/EurekaServerConfig.html#getWaitTimeInMsWhenSyncEmpty()"><CODE>EurekaServerConfig.getWaitTimeInMsWhenSyncEmpty()</CODE></A>, if it cannot
 get the registry information from the peer eureka nodes at start up.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>false - if the instances count from a replica transfer returned
         zero and if the wait time has not elapsed, o otherwise returns
         true</DL>
</DD>
</DL>
<HR>

<A NAME="getReplicaNodes()"><!-- --></A><H3>
getReplicaNodes</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../com/netflix/eureka/cluster/PeerEurekaNode.html" title="class in com.netflix.eureka.cluster">PeerEurekaNode</A>&gt; <B>getReplicaNodes</B>()</PRE>
<DL>
<DD>Gets the list of peer eureka nodes which is the list to replicate
 information to.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the list of replica nodes.</DL>
</DD>
</DL>
<HR>

<A NAME="cancel(java.lang.String, java.lang.String, boolean)"><!-- --></A><H3>
cancel</H3>
<PRE>
public boolean <B>cancel</B>(java.lang.String&nbsp;appName,
                      java.lang.String&nbsp;id,
                      boolean&nbsp;isReplication)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#cancel(java.lang.String, java.lang.String, boolean)">InstanceRegistry</A></CODE></B></DD>
<DD>Cancels the registration of an instance.
 
 <p>
 This is normally invoked by a client when it shuts down informing the
 server to remove the instance from traffic.
 </p>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/netflix/eureka/lease/LeaseManager.html#cancel(java.lang.String, java.lang.String, boolean)">cancel</A></CODE> in interface <CODE><A HREF="../../../com/netflix/eureka/lease/LeaseManager.html" title="interface in com.netflix.eureka.lease">LeaseManager</A>&lt;com.netflix.appinfo.InstanceInfo&gt;</CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#cancel(java.lang.String, java.lang.String, boolean)">cancel</A></CODE> in class <CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>appName</CODE> - the application name of the application.<DD><CODE>id</CODE> - the unique identifier of the instance.<DD><CODE>isReplication</CODE> - true if this is a replication event from other nodes, false
            otherwise.
<DT><B>Returns:</B><DD>true if the instance was removed from the
         <A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka"><CODE>InstanceRegistry</CODE></A> successfully, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="register(com.netflix.appinfo.InstanceInfo, boolean)"><!-- --></A><H3>
register</H3>
<PRE>
public void <B>register</B>(com.netflix.appinfo.InstanceInfo&nbsp;info,
                     boolean&nbsp;isReplication)</PRE>
<DL>
<DD>Registers the information about the <CODE>InstanceInfo</CODE> and replicates
 this information to all peer eureka nodes. If this is replication event
 from other replica nodes then it is not replicated.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>info</CODE> - the <CODE>InstanceInfo</CODE> to be registered and replicated.<DD><CODE>isReplication</CODE> - true if this is a replication event from other replica nodes,
            false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="renew(java.lang.String, java.lang.String, boolean)"><!-- --></A><H3>
renew</H3>
<PRE>
public boolean <B>renew</B>(java.lang.String&nbsp;appName,
                     java.lang.String&nbsp;id,
                     boolean&nbsp;isReplication)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../com/netflix/eureka/lease/LeaseManager.html#renew(java.lang.String, java.lang.String, boolean)">LeaseManager</A></CODE></B></DD>
<DD>Renew the <A HREF="../../../com/netflix/eureka/lease/Lease.html" title="class in com.netflix.eureka.lease"><CODE>Lease</CODE></A> associated w/ the passed in <code>appName</code>
 and <code>id</code>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/netflix/eureka/lease/LeaseManager.html#renew(java.lang.String, java.lang.String, boolean)">renew</A></CODE> in interface <CODE><A HREF="../../../com/netflix/eureka/lease/LeaseManager.html" title="interface in com.netflix.eureka.lease">LeaseManager</A>&lt;com.netflix.appinfo.InstanceInfo&gt;</CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#renew(java.lang.String, java.lang.String, boolean)">renew</A></CODE> in class <CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></CODE></DL>
</DD>
<DD><DL>
<DD><CODE>id</CODE> - - unique id within appName<DD><CODE>isReplication</CODE> - - whether this is a replicated entry from another ds node
<DT><B>Returns:</B><DD>whether the operation of successful</DL>
</DD>
</DL>
<HR>

<A NAME="statusUpdate(java.lang.String, java.lang.String, com.netflix.appinfo.InstanceInfo.InstanceStatus, boolean)"><!-- --></A><H3>
statusUpdate</H3>
<PRE>
public boolean <B>statusUpdate</B>(java.lang.String&nbsp;appName,
                            java.lang.String&nbsp;id,
                            com.netflix.appinfo.InstanceInfo.InstanceStatus&nbsp;newStatus,
                            boolean&nbsp;isReplication)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#statusUpdate(java.lang.String, java.lang.String, com.netflix.appinfo.InstanceInfo.InstanceStatus, boolean)">InstanceRegistry</A></CODE></B></DD>
<DD>Updates the status of an instance. Normally happens to put an instance
 between <CODE>InstanceInfo.InstanceStatus.OUT_OF_SERVICE</CODE> and
 <CODE>InstanceInfo.InstanceStatus.UP</CODE> to put the instance in and out of traffic.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#statusUpdate(java.lang.String, java.lang.String, com.netflix.appinfo.InstanceInfo.InstanceStatus, boolean)">statusUpdate</A></CODE> in class <CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>appName</CODE> - the application name of the instance.<DD><CODE>id</CODE> - the unique identifier of the instance.<DD><CODE>newStatus</CODE> - the new <CODE>InstanceInfo.InstanceStatus</CODE>.<DD><CODE>isReplication</CODE> - true if this is a replication event from other nodes, false
            otherwise.
<DT><B>Returns:</B><DD>true if the status was successfully updated, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="statusUpdate(java.lang.String, com.netflix.eureka.resources.ASGResource.ASGStatus, boolean)"><!-- --></A><H3>
statusUpdate</H3>
<PRE>
public void <B>statusUpdate</B>(java.lang.String&nbsp;asgName,
                         <A HREF="../../../com/netflix/eureka/resources/ASGResource.ASGStatus.html" title="enum in com.netflix.eureka.resources">ASGResource.ASGStatus</A>&nbsp;newStatus,
                         boolean&nbsp;isReplication)</PRE>
<DL>
<DD>Replicate the <em>ASG status</em> updates to peer eureka nodes. If this
 event is a replication from other nodes, then it is not replicated to
 other nodes.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>asgName</CODE> - the asg name for which the status needs to be replicated.<DD><CODE>newStatus</CODE> - the <A HREF="../../../com/netflix/eureka/resources/ASGResource.ASGStatus.html" title="enum in com.netflix.eureka.resources"><CODE>ASGResource.ASGStatus</CODE></A> information that needs to be replicated.<DD><CODE>isReplication</CODE> - true if this is a replication event from other nodes, false
            otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="isLeaseExpirationEnabled()"><!-- --></A><H3>
isLeaseExpirationEnabled</H3>
<PRE>
public boolean <B>isLeaseExpirationEnabled</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html#isLeaseExpirationEnabled()">isLeaseExpirationEnabled</A></CODE> in class <CODE><A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka">InstanceRegistry</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isSelfPreservationModeEnabled()"><!-- --></A><H3>
isSelfPreservationModeEnabled</H3>
<PRE>
public boolean <B>isSelfPreservationModeEnabled</B>()</PRE>
<DL>
<DD>Checks to see if the self-preservation mode is enabled.
 
 <p>
 The self-preservation mode is enabled if the expected number of renewals
 per minute <A HREF="../../../com/netflix/eureka/InstanceRegistry.html#getNumOfRenewsInLastMin()"><CODE>InstanceRegistry.getNumOfRenewsInLastMin()</CODE></A> is lesser than the expected
 threshold which is determined by <A HREF="../../../com/netflix/eureka/PeerAwareInstanceRegistry.html#getNumOfRenewsPerMinThreshold()"><CODE>getNumOfRenewsPerMinThreshold()</CODE></A>
 . Eureka perceives this as a danger and stops expiring instances as this
 is most likely because of a network event. The mode is disabled only when
 the renewals get back to above the threshold or if the flag
 <A HREF="../../../com/netflix/eureka/EurekaServerConfig.html#shouldEnableSelfPreservation()"><CODE>EurekaServerConfig.shouldEnableSelfPreservation()</CODE></A> is set to
 false.
 </p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if the self-preservation mode is enabled, false otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="getNextServerFromEureka(java.lang.String, boolean)"><!-- --></A><H3>
getNextServerFromEureka</H3>
<PRE>
public com.netflix.appinfo.InstanceInfo <B>getNextServerFromEureka</B>(java.lang.String&nbsp;virtualHostname,
                                                                boolean&nbsp;secure)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSortedApplications()"><!-- --></A><H3>
getSortedApplications</H3>
<PRE>
public java.util.List&lt;com.netflix.discovery.shared.Application&gt; <B>getSortedApplications</B>()</PRE>
<DL>
<DD>Gets the list of all <CODE>Applications</CODE> from the registry in sorted
 lexical order of <CODE>Application.getName()</CODE>.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the list of <CODE>Applications</CODE> in lexical order.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumOfReplicationsInLastMin()"><!-- --></A><H3>
getNumOfReplicationsInLastMin</H3>
<PRE>
<FONT SIZE="-1">@Monitor(name="numOfReplicationsInLastMin",
         description="Number of total replications received in the last minute",
         type=GAUGE)
</FONT>public long <B>getNumOfReplicationsInLastMin</B>()</PRE>
<DL>
<DD>Gets the number of <em>renewals</em> in the last minute.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a long value representing the number of <em>renewals</em> in the
         last minute.</DL>
</DD>
</DL>
<HR>

<A NAME="isBelowRenewThresold()"><!-- --></A><H3>
isBelowRenewThresold</H3>
<PRE>
<FONT SIZE="-1">@Monitor(name="isBelowRenewThreshold",
         description="0 = false, 1 = true",
         type=GAUGE)
</FONT>public int <B>isBelowRenewThresold</B>()</PRE>
<DL>
<DD>Checks if the number of renewals is lesser than threshold.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>0 if the renewals are greater than threshold, 1 otherwise.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumOfRenewsPerMinThreshold()"><!-- --></A><H3>
getNumOfRenewsPerMinThreshold</H3>
<PRE>
<FONT SIZE="-1">@Monitor(name="numOfRenewsPerMinThreshold",
         type=GAUGE)
</FONT>public int <B>getNumOfRenewsPerMinThreshold</B>()</PRE>
<DL>
<DD>Gets the threshold for the renewals per minute.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the integer representing the threshold for the renewals per
         minute.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumOfItemsInReplicationPipeline()"><!-- --></A><H3>
getNumOfItemsInReplicationPipeline</H3>
<PRE>
<FONT SIZE="-1">@Monitor(name="itemsInReplicationPipeline",
         type=GAUGE)
</FONT>public long <B>getNumOfItemsInReplicationPipeline</B>()</PRE>
<DL>
<DD>Gets the number of items in the queue pending replication to other
 peers.This gives an indication of replication latency to peer replica
 nodes.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the long value representing the number of items in the queue
         pending replication to other peers.</DL>
</DD>
</DL>
<HR>

<A NAME="getNumOfActiveThreadsInReplicationPipeline()"><!-- --></A><H3>
getNumOfActiveThreadsInReplicationPipeline</H3>
<PRE>
<FONT SIZE="-1">@Monitor(name="numOfActiveThreadsInReplicationPipeline",
         type=GAUGE)
</FONT>public long <B>getNumOfActiveThreadsInReplicationPipeline</B>()</PRE>
<DL>
<DD>Gets the number of active threads used for replicating to peer eureka
 nodes. This gives an indication of the headroom available to handle
 additional replication traffic.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the long value represeting the number of active threads used for
         replicating to peer eureka nodes.</DL>
</DD>
</DL>
<HR>

<A NAME="setNumOfRenewsPerMinThreshold(int)"><!-- --></A><H3>
setNumOfRenewsPerMinThreshold</H3>
<PRE>
public void <B>setNumOfRenewsPerMinThreshold</B>(int&nbsp;newThreshold)</PRE>
<DL>
<DD>Sets the renewal threshold to the given threshold.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>newThreshold</CODE> - new renewal threshold to be set.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/netflix/eureka/InstanceRegistry.html" title="class in com.netflix.eureka"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/netflix/eureka/StatusFilter.html" title="class in com.netflix.eureka"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/netflix/eureka/PeerAwareInstanceRegistry.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PeerAwareInstanceRegistry.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_com.netflix.eureka.InstanceRegistry">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
